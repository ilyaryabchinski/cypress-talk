<!DOCTYPE html>
<html lang="en">
<head>
    <title>Shower Presentation Engine</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="shower/themes/material/styles/styles.css">
    <style>
        .shower {
            --slide-ratio: calc(16 / 9);
            --color-key: #16375A
        }
        .slide::after {
            display: none;
        }
        .center-slide {
            display: flex;
        flex-direction: column;
        align-items: center;
        }
        .mt-50 {
            margin-top: 50px;
        }
        
    </style>
</head>
<body class="shower list">

    <header class="caption">
        <h1>Cypress: painless web testing</h1>
    </header>

    <section class="slide">
        <h2 class="shout" style="font-size: 80px">Modern e2e testing with Cypress.io <br>
        <div style="display: flex; margin-top: 50px;">
            <img src="pictures/angular-512.png" height="35px" width="35px">
            <span style="font-size: 30px">Angular Minsk #2</span>
        </div>
        </h2>
    </section>

    <section class="slide">
        <h2 class="shout" style="font-size: 80px">
            Greeting slide
        </h2>
    </section>

    <section class="slide">
        <h2>Agenda</h2>
        <ol>
            <li>Why do(n't) we test?</li>
            <li>E2E testing tools</li>
            <li>Cypress core concepts & features</li>
            <li>Experience with Cypress</li>
            <li>Ups & downs</li>
        </ol>
    </section>

    <section class="slide" id="cover">
        <figure>
            <img class="cover" src="pictures/pyramid.png">
        </figure>
    </section>

    <section class="slide" id="cover">
        <figure>
            <img class="cover" src="pictures/pyramid2.png">
        </figure>
    </section>

    <section class="slide" id="cover">
        <figure>
            <img class="cover" src="pictures/errors.jpg">
        </figure>
    </section>

    <section class="slide" id="cover">
        <h2>Choose your side</h2>
        <figure>
            <img class="cover" src="pictures/ptcy.png">
        </figure>
    </section>

    <section class="slide" id="cover">
        <figure>
            <img class="cover" src="pictures/ptissue.png">
        </figure>
    </section>

    <section class="slide" id="cover">
            <figure>
                <img class="cover" src="pictures/man.jpg">
            </figure>
        </section>

    <section class="slide" id="cover">
        <figure>
            <img class="cover" src="pictures/fm.png">
        </figure>
    </section>

    <section class="slide">
        <h2>Recap of Front-end Development in 2018</h2>
        <blockquote>
            <p>Many realize that end to end testing is the starting point of doing tests correctly in large part due to Cypress (i.e. Cypress first, then Jest).</p>
        </blockquote>
        <a href="https://frontendmasters.com/books/front-end-handbook/2019/#1.1">Front-end Developer Handbook 2019
        </a>
    </section>

    <section class="slide center-slide">
            <h2>Installing Cypress</h2>
            <pre>
                <code>npm install cypress --save-dev</code>
                <code>yarn add cypress --dev</code>
            </pre>
    </section>

    <section class="slide" id="cover">
        <h2>Testing login form</h2>
            <figure>
                <img class="cover mt-50" src="pictures/tricks.png">
            </figure>
    </section>

    <section class="slide" id="cover">
        <h2>Hello world</h2>
            <figure>
                <img class="cover" src="pictures/hello world.png">
            </figure>
        </section>

    <section class="slide center-slide">
            <h2>Running Cypress</h2>
            <pre>
                <code>npm run start</code>
                <code>npm run cypress:open</code>
                <code>yarn run cypress:open</code>
                <code>npx cypress open</code>
            </pre>
    </section>

    <section class="slide" id="cover">
            <h2>Cypress test runner</h2>
            <figure>
                <img class="cover" src="pictures/open.png">
            </figure>
    </section>

        <section class="slide" id="cover">
                <h2>Running test</h2>
                <figure>
                    <img class="cover mt-50" src="pictures/open1.png">
                </figure>
            </section>    

        <section class="slide">
            <h2>Differences from Selenium</h2>
            <ul>
                <li>Behind Cypress is a Node.js server process</li>
                <li>Cypress is executed in the same run loop as your application.</li>
                <li>Cypress has native access to every single object</li>
                <li>Cypress takes snapshots of your application</li>
                <li>Stubbing network requests</li>
                <li>Spying & Stubbing on DOM API</li>
                </ul>
        </section>
        
        <section class="slide">
                <h2>Querying elements</h2>
                <div style="display: flex">
                        <pre>
                                <code>cy.get('.main').contains('New Post')</code>
                                <code> </code>
                                <code>cy.get('#element')</code>
                                <code>  .then(el => doSomethingAwesome(el))</code>
                            </pre>
                <span class="next"><img src="pictures/jquery.png" alt="" height="200" width="200"></span>
                </div>
        </section>

        <section class="slide">
            <h2>Commands</h2>
            <ul>
                <li>.blur() - Make a focused DOM element blur.</li>
                <li>.focus() - Focus on a DOM element.</li>
                <li>.clear() - Clear the value of an input or textarea.</li>
                <li>.check() - Check checkbox(es) or radio(s).</li>
                <li>.uncheck() - Uncheck checkbox(es).</li>
                <li>.select() - Select an &lt;option&gt; within a &lt;select&gt;.</li>
                <li>.dblclick() - Double-click a DOM element.</li>
            </ul>
        </section>

        <section class="slide">
            <h2>Assert</h2>
            <pre>
                <code>cy.get(':checkbox').should('be.disabled')</code>
            </pre>
        </section>

        <section class="slide">
            <h2>Aliases</h2>
            <pre>
                <code>beforeEach(function () {</code>
                <code>  cy.get('button').invoke('text').as('text')</code>    
                <code>})</code>    
                <code>it('has access to text', function () {</code>  
                <code>  this.text  <span class="comment">// is now available</span></code>  
                <code>})</code>
            </pre>
        </section>

        <section class="slide">
            <h2>Aliases</h2>
            <pre>
                <code>beforeEach(function () {</code>
                <code>  cy.get('table').find('tr').as('rows')</code>    
                <code>})</code>    
                <code>it('has access to rows', function () {</code>  
                <code>  this.rows  <span class="comment">// is now available</span></code>  
                <code>})</code>
            </pre>
        </section>

        <section class="slide">
            <h2>Aliases</h2>
            <pre>
                <code>cy.get('@rows').first().click()</code>
            </pre>
        </section>

        <section class="slide">
            <h2>Custom commands</h2>
            <pre>
                <code>Cypress.Commands.add("login", (email, password) => { ... })</code>
                <code><span class="comment">// somewhere in your test spec</span></code>
                <code>cy.login()</code>
            </pre>
        </section>

    <section class="slide">
        <h2>Folder structure</h2>
        <figure>
            <img src="pictures/structure.PNG">
        </figure>
        </div>
    </section>

    <section class="slide">
            <h2>Stub network requests</h2>
            <pre>
                    <code>cy.server();</code>
                    <code>cy.fixture('bioprocess/bioprocess-list').as('processes')</code>
                    <code>cy.route({</code>
                    <code>  method: 'GET',</code>
                    <code>  url: '/api/process-instances**',</code>
                    <code>  response: '@processes'</code>  
                    <code>}).as('getProcesses');</code>
            </pre>
    </section>

    <section class="slide">
            <h2>Selectors</h2>
            <pre>
                <code>const PROCESS_ITEM_ROW_SELECTOR = '.e2e-process-item-row';</code>
                <code>const STOP_BUTTON_SELECTOR = '.e2e-stop-button';</code>
                <code>const START_BUTTON_SELECTOR = '.e2e-start-button';</code>
            </pre>
            </div>
    </section>

    <section class="slide">
            <h2>Test case</h2>
            <pre>
                    <code>it('should search in process list', () => {</code>
                    <code>  const searchString = 'process';</code>
                    <code>  cy.wait('@getProcesses');</code>
                    <code>  cy.get(SEARCH_FIELD_SELECTOR).type(searchString);</code>
                    <code>  cy.wait('@getProcesses').then(xhr => {,</code>
                    <code>  expect(xhr.status).to.equal(200);</code>  
                    <code>  expect(xhr.url).to.contain(`search=${searchString}`);</code>
                    <code>  });</code>
                    <code>});</code>  
            </pre>
    </section>

    <section class="slide">
            <h2>Run the test!</h2>
            <pre>
                <code>npx cypress open</code>
            </pre>
    </section>

    <section class="slide" id="cover">
            <figure>
                <img class="cover" src="pictures/start.PNG">
            </figure>
    </section>

    <section class="slide" id="cover">
            <figure>
                <img class="cover" src="pictures/snapshot.PNG">
            </figure>
    </section>

    <section class="slide">
            <h2>CI</h2>
            <pre>
                <code>http-server dist/qub-ui -c-1 -p 4200 --silent</code>
                <code>npx cypress verify</code>
                <code>npx cypress run</code>
            </pre>
    </section>

        <section class="slide">
            <h2>How does it works</h2>
            <ul>
                <li>Chains of commands</li>
                <li>Command queue</li>
                <li>Timeouts</li>
            </ul>
        </section>

        <section class="slide">
            <h2>Bundled libraries</h2>
            <ul>
                <li>Mocha</li>
                <li>Chai</li>
                <li>Sinon</li>
                <li>lodash</li>
                <li>jQuery</li>
                <li>minimatch</li>
                <li>moment</li>
                <li>Bluebird</li>
            </ul>
        </section>

        <section class="slide">
            <h2>Other features</h2>
            <ul>
                <li>Plugins</li>
                <li>Dashboard service</li>
                <li>Screenshots & video</li>
                <li>Server stub</li>
                <li>CI</li>
            </ul>
        </section>

    <section class="slide">
            <h2>Issues</h2>
            <ul>
                <li>Can't store element in a variable</li>
                <li>throw new Error() for server errors simulating</li>
                <li>alert, confirm, file uploading</li>
                <li>Overlay elements</li>
            </ul>
    </section>

    <section class="slide">
            <h2>Permanent tradeoffs</h2>
            <ul>
                <li>Cypress is not a general purpose automation tool</li>
                <li>Cross-browser support</li>
                <li>Commands run inside of a browser</li>
                <li>There will never be support for multiple browser tabs</li>
                <li>You cannot use Cypress to drive two browsers at the same time</li>
                <li>Each test is bound to a single origin</li>
            </ul>
    </section>

    <section class="slide">
            <h2>Temporary tradeoffs</h2>
            <ul>
                <li>File uploads & downloads</li>
                <li>lack of commands like .tab() .hover() command</li>
                <li>iframe support is limited</li>
                <li>cy.route() for fetch (there is a workaround)</li>
                <li>Shadow DOM is not supported</li>
            </ul>
    </section>

    <section class="slide">
            <h2>Links</h2>
            <ul>
                <li><a href="https://docs.cypress.io/guides/overview/why-cypress.html#In-a-nutshell">Cypress docs</a></li>
                <li><a href="https://www.youtube.com/watch?v=5XQOK0v_YRE&t=1265s">Brian Mann – I see your point, but… (Part 1) - Assert(JS) 2018 </a></li>
                <li><a href="https://www.youtube.com/watch?v=GH9Dvo_BYkk&t=1s">Avoiding The Suck Of Testing Using Cypress.io</a></li>
            </ul>
    </section>

    <section class="slide">
            <h2 class="shout shrink">Thank you!</h2>
    </section>

    <div class="progress"></div>

    <script src="shower/shower.min.js"></script>
    <!-- Copyright © 3000 Yours Truly, Famous Inc. -->

</body>
</html>
